_jsload&&_jsload('menu', 'x.extend(bl.prototype,{initialize:function(e){if(this._container){return false}this._map=e;this._render();var fp=this;this._container.style.cursor=e.config.defaultCursor;x.on(document,"mousedown",function(i){if(!fp._container){return}fp.hide()});x.on(this._container,"mousemove",g);x.on(this._container,"click",function(i){fp.hide();g(i)});var
fo=this._opts.container;if(!fo){fo=this._map.container;e.addEventListener("onspotmouseover",function(i){fp.spots=i.spots});var fj;e.addEventListener("onspotmouseout",function(i){fj=i.spots;delete fp.spots});e.addEventListener("onspotclick",function(i){fp.spots=i.spots});e.addEventListener("rightclickex",function(fv){if(this.isGlobeMapType()){return}if(!fp._container||fv.infoWindow||!fp._enable){return}if(e.currentOperation!==cx.idle){return}if(!fp.spots&&fj&&fj.length>0){var
fx=fv.pixel;var fw=fj[0];var fu=fw.pt;var i=this.pointToPixel(fu);var ft=fw.bd;if(fx.x-i.x
<ft[2]&&fx.x-i.x>ft[0]&&i.y-fx.y
    <ft[3]&&i.y-fx.y>ft[1]){fp.spots=fj}}fp._showMenu(fv,fo);delete fp.spots});e.addEventListener("forcedown",function(fv){if(this.isGlobeMapType()){return}if(!fp._container||fv.infoWindow||!fp._enable){return}if(!fp.spots&&fj&&fj.length>0){var fx=fv.pixel;var fw=fj[0];var
        fu=fw.pt;var i=this.pointToPixel(fu);var ft=fw.bd;if(fx.x-i.x
        <ft[2]&&fx.x-i.x>ft[0]&&i.y-fx.y
            <ft[3]&&i.y-fx.y>ft[1]){fp.spots=fj}}fp._showMenu(fv,fo);delete fp.spots})}else{x.on(fo,"contextmenu",function(ft){if(e.isGlobeMapType()){return}if(e.currentOperation!==cx.idle){return}if(!fp._container||!fp._enable){return}ft=window.event||ft;var i=ft.target||ft.srcElement;while(i&&!x.hc(i,"pop")){i=i.parentNode}if(i&&x.hc(i,"pop")){fp.hide();return}fp._showMenu(ft,fo,true);return
                a6(ft)})}var fr=[];for(var fm=this._items.length-1;fm>=0;fm--){var fs=this._items[fm];if(fs._insertIndex!==-1){fr=fr.concat(this._items.splice(fm,1))}}for(var fm=0,fk=this._items.length;fm
                <fk;fm++){var fs=this._items[fm];if(fs._type==="menuitem"
                    ){fs.initialize(e,this)}if(fs._type==="divider" ){this._dividers[fs._dIndex].dom=co(this._container, "<div class=\'BMap_cmDivider\'></div>")}}for(var fm=fr.length-1;fm>=0;fm--){var fs=fr[fm];if(fs._type==="menuitem"){fs.initialize(e,this)}if(fs._type==="divider"){for(var fl=0,fq=this._items.length;fl
                    <fq;fl++){if(fl===fs._insertIndex){var fn=this._items[fl]._container||this._dividers[this._items[fl]._dIndex].dom;this._dividers[fs._dIndex].dom=e8(fn,
                        "<div class=\'BMap_cmDivider\'></div>");break}}}}for(var fm=fr.length-1;fm>=0;fm--){var fs=fr[fm];this._items.splice(fs._insertIndex,0,fs)}this._updateShadowSize()},_draw:function(){if(this._map){this.initialize(this._map);if(this._isOpen){this._isOpen=false;this.show()}}},remove:function(){if(this._container){this._container.parentNode.removeChild(this._container);this._container=null}this._map=null},_render:function(){this._container=co(this._map.container,"
                        <div
                            unselectable=\ 'on\'></div>");this._container.className="BMap_contextMenu";this._container.style.fontSize="12px";return this._container},addItem:function(fl,e){if(!fl||fl._type!="menuitem"||fl._text==""||fl._width
                            <=0){return}for(var fk=0,fj=this._items.length;fk<fj;fk++){if(this._items[fk]===fl){return}}if(e===undefined||e>this._items.length-1){e=-1}fl._insertIndex=e;fl.initialize(this._map,this);if(e===-1){this._items.push(fl);this._rItems.push(fl)}else{this._items.splice(e,0,fl);this._rItems.splice(e,0,fl)}x.ac(fl.getDom(),"BMap_cmLstItem");if(this._items.length>1){this._items[this._items.length-2]._type=="menuitem"&&x.rc(this._items[this._items.length-2].getDom(),"BMap_cmLstItem")}else{this._items[0]._type=="menuitem"&&x.ac(this._items[0].getDom(),"BMap_cmFstItem")}this._updateShadowSize()},removeItem:function(fk){if(!fk||fk._type!="menuitem"){return}for(var
                                fj=0,e=this._items.length;fj
                                <e;fj++){if(this._items[fj]===fk){this._items[fj].remove();this._items.splice(fj,1);delete fk._insertIndex;e--}}for(var fj=0,e=this._rItems.length;fj<e;fj++){if(this._rItems[fj]===fk){this._rItems[fj].remove();this._rItems.splice(fj,1);delete
                                    fk._insertIndex;e--}}if(!this._container){return}if(this._items.length>0){this._items[this._items.length-1]._type=="menuitem"&&x.ac(this._items[this._items.length-1].getDom(),"BMap_cmLstItem")}this._updateShadowSize()},addSeparator:function(e){if(e===undefined||e>this._items.length-1){e=-1}var
                                    fo={_type:"divider",_dIndex:this._dividers.length,_insertIndex:e};this._dividers.push({dom:null});if(!this._container){return}var fn="
                                    <div class=\ 'BMap_cmDivider\'></div>";if(e===-1){this._dividers[this._dividers.length-1].dom=co(this._container,fn)}else{var fl=this._items;for(var fm=0,fk=fl.length;fm
                                    <fk;fm++){if(fm===e){var fj=fl[fm]._container||this._dividers[fl[fm]._dIndex].dom;this._dividers[this._dividers.length-1].dom=e8(fj,fn);break}}}if(e===-1){this._items.push(fo)}else{this._items.splice(e,0,fo)}this._updateShadowSize()},removeSeparator:function(fj){if(!this._dividers[fj]){return}if(this._dividers[fj].dom&&this._dividers[fj].dom.parentNode){this._dividers[fj].dom.parentNode.removeChild(this._dividers[fj].dom)}for(var
                                        fk=0,e=this._items.length;fk<e;fk++){if(this._items[fk]&&this._items[fk]._type=="divider" &&this._items[fk]._dIndex==fj){this._items.splice(fk,1);e--}if(this._items[fk]&&this._items[fk]._type=="divider" &&this._items[fk]._dIndex>fj){this._items[fk]._dIndex--}}this._dividers.splice(fj,1);this._updateShadowSize()},setPosition:function(e,i){this._left=e;this._top=i;this._container.style.left=e+"px";this._container.style.top=i+"px"},show:function(){if(this._isOpen==true){return}if(this._rItems.length==0){return}this._isOpen=true;if(this._container){this._container.style.visibility="visible"}var
                                        e=new aB("onopen");e.point=this.curPoint;e.pixel=this.curPixel;this.dispatchEvent(e)},hide:function(){if(this._isOpen==false){return}this._isOpen=false;if(this._container){this._container.style.visibility="hidden"}var
                                        e=new aB("onclose");e.point=this.curPoint;e.pixel=this.curPixel;this.dispatchEvent(e)},setCursor:function(e){if(!e){return}this._opts.cursor=e;if(this._container){this._container.style.cursor=this._opts.cursor}},_updateShadowSize:function(){if(this._container){this._container.offsetWidth+"px";this._container.offsetHeight+"px"}},_showMenu:function(fm,fp,fo){if(this._rItems.length==0){return}var
                                        fq=this;var fs=fm.layerX||fm.offsetX;var fr=fm.layerY||fm.offsetY;var fu=fm.target||fm.srcElement;if(fo){var fn=fu;if(fp==fq._map.container&&fn!==fq._map.maskLayer&&fn.nodeName.toLowerCase()!="svg"){while(fn&&!x.hc(fn,"shadow")){fn=fn.parentNode}if(!x.hc(fn,"shadow")||fn.getAttribute("type")!="infowindow_shadow"){fq.hide();return}}while(fu&&fu!=fq._map.container){if(!(fu.clientWidth==0&&fu.clientHeight==0&&fu.offsetParent&&fu.offsetParent.nodeName.toLowerCase()=="td")){if(fu.nodeName.toLowerCase()=="svg"){fs+=parseInt(fu.getAttribute("viewBox").split("
                                        ")[0])||0;fr+=parseInt(fu.getAttribute("viewBox").split(" ")[1])||0}else{fs+=fu.offsetLeft;fr+=fu.offsetTop}}fu=fu.offsetParent||fu.parentNode}fq.curPixel=new cN(fs,fr)}else{fq.curPixel=fm.pixel}if(this.spots&&this.spots.length>0){var
                                        fl=this.spots[0];var fv=fl.userdata.iconPoint;fq.curPoint=fv;fq.curPixel=fq._map.pointToPixel(fv)}else{if(fm.overlay&&fm.overlay instanceof b8){fq.curPoint=fm.overlay.getPoint();fq.curPixel=fq._map.pointToPixel(fq.curPoint)}else{fq.curPoint=fq._map.pixelToPoint(fq.curPixel)}}if(fq.curPoint.lng
                                        <be[fq._map.mapType].bounds[0]||fq.curPoint.lng>be[fq._map.mapType].bounds[2]||fq.curPoint.lat
                                            <be[fq._map.mapType].bounds[1]||fq.curPoint.lat>be[fq._map.mapType].bounds[3]){return}var fk=fq.getDom().offsetHeight;var ft=fq.getDom().offsetWidth;var fj=fm.offsetX;var i=fm.offsetY;if(fo){fj=fs;i=fr}if(fm.offsetX+ft>this._map.width){fj-=ft}if(fm.offsetY+fk>this._map.height){i-=fk}fq.setPosition(fj,i);fq.show()},showAt:function(e,fk){var
                                                fj=this._map.maskLayer;var i=this._map.getContainer();this._showMenu({layerX:e,layerY:fk,offsetX:e,offsetY:fk,pixel:new cN(e,fk),target:fj},i)}});x.extend(dH.prototype,{initialize:function(e,i){if(this._container){return
                                                false}this._map=e;this._contextmenu=i;if(i.getDom()){this._render();this._bind();if(!this._enabled){this._enabled=true;this.disable()}}return true},remove:function(){var e=this;if(this._container){this._container.parentNode.removeChild(this._container);this._container=null}this._contextmenu=null;this._map=null},_draw:function(){if(this._contextmenu&&this._map){this.initialize(this._map,this._contextmenu)}},_render:function(){var
                                                fm="
                                                <div "+(this._opts.id?" id=\ '"+this._opts.id+"\' ":" ")+" unselectable=\ 'on\'><span>"+this._text+"</span></div>";var fq=this._insertIndex;var fl=this._contextmenu.getDom();var fn=this._contextmenu._items;var fj=this._contextmenu._dividers;if(fq===-1){this._container=co(fl,fm)}else{for(var
                                                fk=0,e=fn.length;fk<e;fk++){if(fk===fq){var fo=fn[fk]._container||fj[fn[fk]._dIndex].dom;this._container=e8(fo,fm);break}}}var fp=this._container.style;fp.padding="3px 6px" ;fp.margin="0 2px" ;fp.MozUserSelect="none"
                                                    ;fp.lineHeight="17px" ;fp.width=this._opts.width+ "px";if(this._enabled){fp.color="#656565" ;fp.cursor="pointer" }else{fp.color="#aaa" ;fp.cursor=this._map.config.defaultCursor}return this._container},_bind:function(){var
                                                    e=this;x.on(this._container, "click",function(i){if(!e._enabled){g(i);return}if(e._callback&&e._callback.call){e._callback.call(e,e._contextmenu.curPoint,e._contextmenu.curPixel)}});x.on(this._container,
                                                    "mousedown",function(i){g(i)});x.on(this._container, "mouseover",function(){if(!e._enabled){return}e._container.style.color="#3385ff" });x.on(this._container, "mouseout",function(){if(!e._enabled){return}e._container.style.color="#656565"
                                                    })},setText:function(e){if(!e){return}this._text=e+ "";if(this._container){this._container.innerHTML="<span>" +this._text+ "</span>"}},enable:function(){this._enabled=true;if(this._container){this._container.style.color="#656565"
                                                    ;this._container.style.cursor="pointer" }},disable:function(){this._enabled=false;if(this._container){this._container.style.color="#aaa" ;this._container.style.cursor=this._map.config.defaultCursor}}}); ');